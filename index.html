<script>
  const headline = document.getElementById('headline');
  const emailWrapper = document.getElementById('emailWrapper');
  const quote = document.getElementById('quote');

  const fonts = [
    'Impact, Charcoal, sans-serif',
    '"Times New Roman", Times, serif',
    '"Comic Sans MS", cursive',
    'Roboto, sans-serif',
    '"Courier New", Courier, monospace',
    'Georgia, serif',
    'Verdana, sans-serif',
    'Tahoma, sans-serif',
    'Palatino, serif',
    '"Trebuchet MS", sans-serif',
    'Papyrus, fantasy',
    '"Arial Black", Gadget, sans-serif',
    '"Lucida Console", Monaco, monospace',
    '"Gill Sans", sans-serif',
    '"Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif',
    '"Brush Script MT", cursive'
  ];

  function shuffle(array) {
    let currentIndex = array.length, randomIndex;
    while (currentIndex !== 0) {
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]
      ];
    }
    return array;
  }

  const shuffledFonts = shuffle(fonts);
  let fontIndex = 0;
  let flickerInterval;

  function startFlicker() {
    flickerInterval = setInterval(() => {
      headline.style.fontFamily = shuffledFonts[fontIndex];
      fontIndex = (fontIndex + 1) % shuffledFonts.length;

      // ~15% chance to pause
      if (Math.random() < 0.15) {
        pauseFlickerRandom();
      }
    }, 200); // slower flicker speed
  }

  function pauseFlicker() {
    clearInterval(flickerInterval);
    headline.style.fontFamily = "Arial, sans-serif";
  }

  function resumeFlicker() {
    startFlicker();
  }

  function pauseFlickerRandom() {
    clearInterval(flickerInterval);
    const pauseDuration = 800 + Math.random() * 700; // longer pauses
    setTimeout(() => {
      startFlicker();
    }, pauseDuration);
  }

  // Start flickering immediately
  startFlicker();

  // After 2 seconds, pause and fade in quote/email
  setTimeout(() => {
    pauseFlicker();
    quote.style.opacity = 1;
    emailWrapper.style.opacity = 1;
    // After fade-in, resume flickering
    setTimeout(() => {
      startFlicker();
    }, 1000);
  }, 2000);
</script>
